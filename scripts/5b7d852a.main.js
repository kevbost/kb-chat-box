"use strict";function loadChat(){$.getJSON("http://tiny-pizza-server.herokuapp.com/collections/chat-messages").done(function(a){renderChat(a)})}function renderChat(a){a=a.splice(0,50),a.forEach(function(a){if(a.user&&a.time&&a.message){var b=chatBox(a);_.last(b,[1]),$(".chatbox-area").prepend(b)}})}function Message(a,b,c){console.log(a),this.user=a,this.message=b||"A random user just submitted an empty message from his local chat client.",this.time=c||"Immediately.",this.meta="very m374",this.appID="kevbost"}function update(a){$.post("http://tiny-pizza-server.herokuapp.com/collections/chat-messages",a)}var user;$(".submit-username").click(function(){var a=$(".input-username").val();$(".identity, .main").addClass("activate"),$(".container").scrollTop($(".main")[0].scrollHeight),console.log(a)});var now=Date.now(),chatBox=_.template($(".chatBoxTemplate").text());$(".textfield2").keypress(function(a){"13"==a.keyCode&&(a.preventDefault(),$(".submit-message").trigger("click"))}),$(".submit-message").click(function(){var a=$(".input-username").val(),b=$(".textfield2").val();$(".textfield2").val("");var c=now,d=new Message(a,b,c);update(d);var e=chatBox(d);$(".chatbox-area").append(e)}),loadChat();